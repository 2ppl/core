```
                       /--------------------\
                       |  @2ppl/core        |
                       \--------------------/
                      /           |          \
                     /            |           \
                    /             |            \
/-----------------\    /--------------------\   \
| @2ppl/server    |    | boilerplate-schema |    \
\-----------------/    \--------------------/     \
         |            /                      \     \
         |           /                        \     \
         |          /                          \     \
|-----------------|                           |-----------------|
| Backend App     |                           | Frontend App    |
| boilerplate-api |                           | boilerplate-ui  |
|-----------------|                           |-----------------|
```

## Зависимости

### @2ppl/core

Пакет `@2ppl/core` включает в себя базовые интерфейсы бойлерплейта и утилитарные функции, которые связывают между собой серверную и клиентскую части.

Он импортирует в себя только сторонние общие библиотеки, не привязанные к конкретному виду использования приложения, например React или Fastify.

### @2ppl/server

Здесь находятся реализации интерфейсов из `@2ppl/core` пригодные для использования с Fastify.

Также в этом пакете хранится набор инструментов для работы с базой данных.

Помимо этого в пакете описана реализация модульности приложения при помощи классов `App` и `AppModule`.

### boilerplate-schema

Схема является частью бизнес логики проекта. В ней описываются сущности приложения и их валидаторы. При помощи сущностей и валидаторов описываются запросы API (роуты и методы).

Описание производится при помощи библиотеки Typebox, благодаря которой из одной записи можно получить валидные типы для Typescript и валидные объекты JSON-Schema.

Этот пакет, как и два описанных выше, является библиотекой и не устанавливается на сервер как отдельное приложение.

### boilerplate-server

Реализация серверной бизнес логики приложения находится в данном репозитории. Это приложение устанавливается и запускается на сервере. Оно упаковывается в контейнер docker и может быть запущено при помощи любого совместимого оркестратора.

Базовые примеры использования уже включены в виде модулей, которые регистрируются в приложении в файле `src/index.ts`.

Все модули находятся по адресу формата `src/{module_name}`.

Модуль обязан экспортировать объект класса `AppModule`, для создания которого необходимым является наличие функции `plugin` в формате, который поддерживает Fastify.

### boilerplate-ui

Клиентское приложение, написанное с использованием библиотеки React, включающее в себя пакеты `@2ppl/core` и `boilerplate-schema` для взаимодействия с серверной частью.

## Запуск

Для быстрого запуска локально необходимо склонировать три проекта:
- boilerplate-server
- boilerplate-ui
- boilerplate-db

В проекте `boilerplate-db` находится описание файла docker-compose с контейнерами для базы данных pgsql и субд pgadmin.

Его следует запустить в первую очередь при помощи команды:

```
# docker-compose up
```

Далее следует запускать серверную часть, предварительно скопировав файл `.env.example` с новым именем `.env`, и убедившись, что конфигурация параметра `PG_CONNECTION` соответствует действительности.

```
# yarn start
```

Если все настроено правильно, то в терминале появятся сообщения об инициализации базы данных и установке миграций а затем информация о том, что приложение готово к работе и слушает определенный порт (по умолчанию 3000).

На этом моменте можно отправить запрос на сервер, например через постман `GET /api/page`.

После этих действий можно запускать локально клиентскую часть, для этого следует перейти в директорию с репозиторием приложения (boilerplate-ui).

```
# yarn start
```